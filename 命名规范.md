# 命名规范

## java

- 类名使用 UpperCamelCase 风格，但以下情形例外：DO / DTO / VO / UID 等。 

- 方法名、参数名、成员变量、局部变量都统一使用 lowerCamelCase 风格，必须遵从 驼峰形式。

- 常量命名全部大写，单词间用下划线隔开，力求语义表达完整清楚，不要嫌名字长。

- 包名统一使用小写，点分隔符之间有且仅有一个自然语义的英语单词。包名统一使用单数形式，

- 类名如果有复数含义，类名可以使用复数形式。 

- 如果模块、接口、类、方法使用了设计模式，在命名时需体现出具体模式

- Service/DAO 层方法命名规约    
  - 1） 获取单个对象的方法用 get 做前缀。    
  - 3） 获取统计值的方法用 count 做前缀。
  - 4） 插入的方法用 insert 做前缀。  
  - 5） 删除的方法用 remove 做前缀。   
  - 6） 修改的方法用 update 做前缀
- 数据传输对象：xxxDTO，xxx 为业务领域相关的名称。 
- 采用 4 个空格缩进，禁止使用 tab 字符
- 不能使用过时的类或方法。 
- Object 的 equals 方法容易抛空指针异常，应使用常量或确定有值的对象来调用 equals：推荐使用 java.util.Objects#equals（JDK7 引入的工具类） 
- 构造方法里面禁止加入任何业务逻辑，如果有初始化逻辑，请放在 init 方法中。 
- POJO 类必须写 toString 方法。使用 IDE 中的工具：source> generate toString 时，如果继承了另一个 POJO 类，注意在前面加一下 super.toString。 
- 类内方法定义的顺序依次是：公有方法或保护方法 > 私有方法 > getter/setter 方法
- 循环体内，字符串的连接方式，使用 StringBuilder 
- 慎用 Object 的 clone 方法来拷贝对象。 说明：对象的 clone 方法默认是浅拷贝，若想实现深拷贝需要重写 clone方法实现域对象的 深度遍历式拷贝。 
- 不要在 foreach 循环里进行元素的 remove/add 操作。remove 元素请使用 Iterator 方式，如果并发操作，需对 Iterator 对象加锁。 
- 使用 entrySet 遍历 Map 类集合 KV，而不是 keySet 方式进行遍历。 JDK8，使用 Map.foreach 
## 注释
- 类、类属性、类方法的注释必须使用 Javadoc 规范，使用/**内容*/格式，不得使用 // xxx 方式

- 所有的类都必须添加创建者和创建日期。 
- 方法内部单行注释，在被注释语句上方另起一行，使用//注释。方法内部多行注释 使用/* */注释，注意与代码对齐
- 后台输送给页面的变量必须加$!{var}——中间的感叹号。 
- 不要在视图模板中加入任何复杂的逻辑。 

## 安全规约

- 隶属于用户个人的页面或者功能必须进行权限控制校验
- 在使用平台资源，譬如短信、邮件、电话、下单、支付，必须实现正确的防重放的机 制，如数量限制、疲劳度控制、验证码校验，避免被滥刷而导致资损。  

## mysql规约

- 表名不使用复数名词
- 小数类型为 decimal，禁止使用 float 和 double。 
- varchar 是可变长字符串，不预先分配存储空间，长度不要超过 5000，如果存储长 度大于此值，定义字段类型为 text，独立出来一张表，用主键来对应，避免影响其它字段索引效率
- 库名与应用名称尽量一致。 
- 字段允许适当冗余，以提高查询性能，但必须考虑数据一致:不是频繁修改的字段,）不是超长字段
- 不要使用 count(列名)或 count(常量)来替代 count(*)，count(*)是 SQL92 定义的 标准统计行数的语法，跟数据库无关，跟 NULL 和非 NULL 无关。 
- 使用 ISNULL()来判断是否为 NULL 值。 
- 在代码中写分页查询逻辑时，若 count 为 0 应直接返回，避免执行后面的分页语句。 
- 不得使用外键与级联，一切外键概念必须在应用层解决。 
  - 说明： 以学生和成绩的关系为例，学生表中的student_id是主键，那么成绩表中的student_id 则为外键。如果更新学生表中的 student_id，同时触发成绩表中的 student_id 更新，即为 级联更新。外键与级联更新适用于单机低并发，不适合分布式、高并发集群；级联更新是强阻 塞，存在数据库更新风暴的风险；外键影响数据库的插入速度。 

## orm映射

- 在表查询中，一律不要使用 * 作为查询的字段列表，需要哪些字段必须明确写明
- sql.xml 配置参数使用：#{}， #param# 不要使用${} 此种方式容易出现 SQL 注入。
- @Transactional 事务不要瞎用。
- 注意超过 2 个参数的查询封装，禁止 使用 Map 类来传输
- 服务器内部重定向使用 forward；外部重定向地址使用 URL ，否则 会带来 URL 维护不一致的问题和潜在的安全风险